
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Phone</th>
        <th>Truck Type</th>
        <th>Availability</th>
        <th>Current Location</th>
        <th>Desired Location</th>
        <% if current_user.account_type != 'dispatcher' %>
          <th>Active</th>
        <% end %>
        <th>Driver status</th>
        <th>Company</th>
        <th>Covered by:</th>
        <% if data_id == 'report-feed' %>
          <th>Etrac</th>
          <th>Plate Trailer</th>
          <th>Destination Zone</th>
        <% end %>
        <th>Preferred Lanes</th>
      </tr>
    </thead>

    <tbody id="<%=data_id%>">
      <% @drivers.each do |driver| %>
      <% covered_highlight1 = driver.Covered ? 'cyan' : '' %>
      <% covered_highlight2 = driver.Covered ? 'red' : '' %>
        <tr driver="<%= driver.id %>">
          <% if data_id == 'report-feed' %>
            <% if params[:q] %>
              <%
                search_hash = {}
                params[:q].each do |param|
                  search_hash[param] = params[:q][param]
                end
                params.each do |param|
                  if param == 'miles' || param == :miles
                    search_hash[:miles] = params[param]
                  end
                end
              %>
            <% end %>
            <td class="<%=covered_highlight1%>">
              <%= link_to driver.full_name,
                driver_path(
                  id: driver.id,
                  report: @drivers.map(&:id),
                  search: search_hash
                ) %>
              <div><%=" ID: #{driver.driver_id_tag}"%></div>
            </td>
          <% else %>
            <td class="<%=covered_highlight1%>">
              <%= link_to driver.full_name, driver %>
              <div><%=" ID: #{driver.driver_id_tag}"%></div>
            </td>
          <% end %>
          <td class="<%=covered_highlight1%>">
            <%= number_to_phone driver.driver_phone,
            pattern: /(\d{3})(\d{3})(\d{4})$/,
            area_code: true %>
            <span> <%= " - #{driver.contact_name}" %>
          </td>
          <% truck_type_class = ['48R', '53R', '53RM'].include?(
            driver.driver_truck_type
          ) ? "truck-type yellow" : "truck-type" %>
          <td class="<%=truck_type_class%>"><%= driver.driver_truck_type %></td>
          <td class="<%=covered_highlight2%>">
            <%=
              driver.driver_availability ?
                driver.driver_availability.strftime("%m/%d/%Y") :
                nil
            %>
          </td>
          <td class="<%=covered_highlight2%>">
            <%= driver.current_location %>
          </td>
          <td class="<%=covered_highlight2%>">
            <%= driver.desired_location %>
          </td>
          <% if current_user.account_type != 'dispatcher' %>
            <% if driver.active == true%>
              <td class="green">Answering</td>
            <% else %>
              <td class="red">Not Answering</td>
            <% end %>
          <% end %>
          <td class="<%=covered_highlight1%>"><%= driver.driver_status %></td>
          <td class="<%=covered_highlight1%>"><%= driver.driver_company %></td>
          <td class="<%=covered_highlight1%>">
            <strong><%= driver.user ? driver.user.full_name : '' %></strong>
          </td>
          <% if data_id == 'report-feed' %>
            <% etrac_class = driver.Etrac ? 'green' : 'red' %>
            <% plate_trailer_class = driver.PlateTrailer ? 'green' : 'red' %>
            <td class="<%= etrac_class%>">
              <%= humanize_boolean(driver.Etrac) %>
            </td>
            <td class="<%= plate_trailer_class%>">
              <%= humanize_boolean(driver.PlateTrailer) %>
            </td>
            <td class="<%=covered_highlight1%>">
              <%= driver.destination_zone %>
            </td>
          <% end %>
          <td class="<%=covered_highlight1%>">
            <%= driver.PreferredLanes && driver.PreferredLanes.length != 0 ?
              driver.PreferredLanes.split(", ").join(" ").gsub(/[\"\[\]]/, '')
              : nil %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
